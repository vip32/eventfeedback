(function(){var i,r,t,u,n,f=function(n,t){return function(){return n.apply(t,arguments)}},e={}.hasOwnProperty,o=function(n,t){function r(){this.constructor=n}for(var i in t)e.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};require("lib/marionette-renderer");require("lib/string-helper");require("lib/view-helper");t=require("config");u=require("settings");n=require("vent");r=require("../../models/resource");i=function(i){function e(){return this.initialize=f(this.initialize,this),e.__super__.constructor.apply(this,arguments)}return o(e,i),e.prototype.routers={},e.prototype.initialize=function(){log("application:initialize");n.setup();this.hookGlobalEvents();this.on("initialize:after",function(n){return function(){var u,i,f,r;log("application init after");r=t.modules;for(i in r)u=r[i],log("=== module",i),f=new(require(u)),n.routers[i]=f;return log("routers:",n.routers),Backbone.history.start(),log("current route:",n.currentRoute())}}(this));return this.addInitializer(function(n){return function(){return n.layout=new(require(t.layout)),n.layout.render()}}(this)),this.resources=new r.Collection,this.resources.fetch({data:{language:"de-DE"}}).done(function(){return function(){return n.trigger("resources:loaded")}}(this)),u.set("last-visit",moment()),appInsights.trackEvent("event/appStart"),this.start()},e.prototype.checkauth=function(n){return log("checkauth",n)},e.prototype.navigate=function(n,t){return log("==========================| "+n+" |========================"),log("navigate",n,t),appInsights.trackPageView(n),t=t||{},t.trigger=!0,_.isEmpty(t!=null?t.returnroute:void 0)||(n=""+n+"?returnroute="+t.returnroute),Backbone.history.navigate(n,t)},e.prototype.currentRoute=function(){return Backbone.history.fragment},e.prototype.startModule=function(n,t){var i;if(log("startmodule",route),i=n||this.module(n)||null,ContactManager.currentModule!==i)return this.currentModule!=null&&this.currentModule.stop(),this.currentModule=i,i?i.start(t):void 0},e.prototype.hookGlobalEvents=function(){return $(window).error(function(t){var i;return i="'"+t.originalEvent.message+"' at "+t.originalEvent.filename+":"+t.originalEvent.lineno,log("ERROR:",i),appInsights.trackEvent("error",{message:i}),t==null?(alert(i),n.trigger("about:index")):void 0})},e}(Backbone.Marionette.Application);module.exports=new i}).call(this);
//# sourceMappingURL=application.min.js.map
